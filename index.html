<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>공유 맵 핀</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="loading" class="loading hidden">
        <p>로딩 중...</p>
    </div>
    <div class="instructions">
        <h3>사용법</h3>
        <p>🖱️ 드래그: 지도 이동<br>
        🖱️ 휠/핀치: 확대/축소<br>
        🖱️ 더블클릭: 핀 생성</p>
    </div>
    
    <!-- 층 선택 버튼 -->
    <div class="floor-selector">
        <button class="floor-btn active" data-floor="1">1층</button>
        <button class="floor-btn" data-floor="2">2층</button>
        <button class="floor-btn" data-floor="3">3층</button>
        <button class="floor-btn" data-floor="4">4층</button>
        <button class="floor-btn" data-floor="5">5층</button>
    </div>
    
    <div id="auth-info" class="auth-info" style="display: none;">
        <span id="username-display"></span>
        <button class="btn btn-secondary btn-sm" id="logout-btn">로그아웃</button>
    </div>
    <div id="map-container">
        <img id="map-image" src="map_floor_1.png" alt="지도">
    </div>
    <!-- 로그인 모달 -->
    <div id="login-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="auth-title">로그인</h2>
            </div>
            <div class="form-group">
                <label>아이디</label>
                <input type="text" id="login-username" placeholder="아이디 입력">
            </div>
            <div class="form-group">
                <label>비밀번호</label>
                <input type="password" id="login-password" placeholder="비밀번호 입력">
            </div>
            <button class="btn btn-primary" id="auth-submit" style="width: 100%;">로그인</button>
            <div class="auth-toggle" id="auth-toggle">
                계정이 없으신가요? 회원가입
            </div>
        </div>
    </div>
    <!-- 핀 생성 모달 -->
    <div id="create-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>새 핀 만들기</h2>
                <button class="close-btn" id="close-create">&times;</button>
            </div>
            <div class="form-group">
                <label>제목</label>
                <input type="text" id="pin-title" placeholder="제목 입력">
            </div>
            <div class="form-group">
                <label>내용</label>
                <textarea id="pin-content" placeholder="내용 입력"></textarea>
            </div>
            <div class="form-group">
                <label>이미지 (선택)</label>
                <input type="file" id="pin-image" accept="image/*">
                <div id="image-preview-container" class="image-preview">
                    <img id="image-preview" alt="미리보기">
                </div>
            </div>
            <div class="form-group" id="notice-checkbox-container" style="display: none;">
                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" id="is-notice">
                    <span>🔔 공지 핀으로 생성 (관리자 전용)</span>
                </label>
            </div>
            <button class="btn btn-primary" id="save-pin" style="width: 100%;">저장</button>
        </div>
    </div>
    <!-- 핀 보기 모달 -->
    <div id="view-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="view-title"></h2>
                <button class="close-btn" id="close-view">&times;</button>
            </div>
            <p style="color: #666; margin-bottom: 15px;"><strong id="view-author"></strong></p>
            <img id="view-image" class="view-image hidden" alt="첨부 이미지">
            <p id="view-content" style="line-height: 1.6; color: #333; margin-bottom: 20px;"></p>
            
            <!-- 좋아요 섹션 -->
            <div class="like-section">
                <button class="btn-like" id="like-btn">
                    <span class="heart">♡</span>
                    <span id="like-count">0</span>
                </button>
            </div>

            <!-- 댓글 섹션 -->
            <div class="comment-section">
                <h3>댓글 <span id="comment-count">0</span></h3>
                <div class="comment-input-area">
                    <textarea id="comment-input" placeholder="댓글을 입력하세요..." rows="2"></textarea>
                    <button class="btn btn-primary btn-sm" id="add-comment">댓글 작성</button>
                </div>
                <div id="comments-list"></div>
            </div>

            <div style="margin-top: 20px; display: flex; gap: 10px;">
                <button class="btn btn-danger" id="delete-pin" style="display: none;">삭제</button>
            </div>
        </div>
    </div>
    <script type="module" src="Map.js"></script>
</body>
</html>
